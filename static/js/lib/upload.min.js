/**
* upload
* @version 0.6.8
* @namespace FOCUS.widget
* @author lvxiang
*/
window.FOCUS=window.FOCUS||{};
void function(h,l,n){this.UUID=(new Date).valueOf().toString(16).toUpperCase();this.namespace=function(){for(var e=[].slice.call(arguments),k,a,c,b=[];e.length;){k=e.shift().split(/\./);for(c=h;k.length;)a=k.shift(),c[a]||(c[a]={}),c=c[a];b.push(c)}return 1<b.length?b:b[0]};this.BASEPATH=h.FOCUS_BASEPATH||function(e){for(var k=h.location,a=/^(\w+\:\/{2,3}.+?)\//.exec(k.href)[1],c=/(.*?\/)(?:[^\/]*?(?:base|upload|transmitter)[^\/]*?)\.js(?:[?#].*)?$/i,b=/^\w+\:\/\//,g=/^\//,f=/^.*\//,d,p,m=0,u=e.length;m<
u;m++)if(p=e[m].src,b.test(p)||(p=g.test(p)?a+p:f.exec(k.href)[0]+p),p=c.exec(p)){d=p[1];break}d?b.test(d)||(d=d.replace(RegExp(k.protocol+"\\/\\/"+k.host,"i"),""),d=k.protocol+"//"+k.host+d):d=f.exec(k.href)[0];return d}(l.getElementsByTagName("script"))}.call(FOCUS,this,this.document);void function(){var h=this.BASEPATH;this.PATH_CHARSET=h+"swf/transform4Charset.swf";this.PATH_FLASH=h+"swf/swfupload.swf";this.PATH_FLASH_FP9=h+"swf/swfupload_fp9.swf"}.call(FOCUS);
void function(h,l,n){var e=this.namespace("FOCUS.util");e.type=function(a){var b,g=/\{\s*\[native\s*code\]\s*\}/i;null===a?b="null":"undefined"===typeof a?b="undefined":(b=Object.prototype.toString.call(a).match(/\w+/g)[1].toLowerCase(),"object"===b&&g.test(a+"")&&(b="function"));return b};e.trim=function(a){return(a+"").replace(/^[\s\u00A0]+|[\s\u00A0]+$/g,"")};e.JSON=function(a){var b={};b.stringify=a?a.stringify:function(){return""};b.parse=function(b){var a;if("string"===e.type(b))try{a=(new Function("return "+
b))()}catch(d){a={}}else a=b;return a};return b}.call(this,h.JSON);e.browser=function(a){var b=/chrome\/(\d+\.\d+)/,g=/safari\/(\d+\.\d+)/,f=/version\/(\d+\.\d+)/,d={},p;if(p=/msie\s*(\d+\.\d+)/.exec(a))return d.msie=!0,d.version=p[1],d;if(p=/firefox\/(\d+\.\d+)/.exec(a))return d.mozilla=d.firefox=!0,d.version=p[1],d;if(p=/webkit\/(\d+\.\d+)/.exec(a)){d.webkit=!0;d.version=p[1];if(h.chrome)return d.chrome=!0,d.version=b.exec(a),d.version&&(d.version=d.version[1]),d;if(p=g.exec(a))d.safari=!0,d.version=
[1];return d}if((p=/opera/.exec(a))&&h.opera)d.opera=!0,d.version=f.exec(a)[1];return d}.call(this,h.navigator.userAgent.toLowerCase());e.flash=function(a,b){var g={has:!1,version:0};try{var f=/\d+/g,d=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");f.exec("");g={has:!0,version:d.GetVariable("$version").match(f).join(".")}}catch(p){b.length&&(b["Shockwave Flash"]&&b["Shockwave Flash"].description&&!("undefined"!==typeof a.mimeTypes&&a.mimeTypes["application/x-shockwave-flash"]&&!a.mimeTypes["application/x-shockwave-flash"].enabledPlugin))&&
(g={has:!0,version:/\d+\.\d+/.exec(b["Shockwave Flash"].description)[0]})}return g}.call(this,h.navigator,h.navigator.plugins);e.extend=function(){var a=arguments.callee,b,g;"object"!==e.type(arguments[0])?(b=1,g=!!arguments[0]):(b=0,g=!1);var f=arguments[b]||{};b=[].slice.call(arguments,b+1);for(var d,p;b.length;)if(d=b.shift(),"object"===e.type(d)){var m,k;for(k in d)if(m=d[k],"object"===e.type(m))if(m==h||m==l||"childNodes"in m&&"nextSibling"in m&&"nodeType"in m){if(g||!(k in f))f[k]=m}else{p=
e.type(f[k]);if(!(k in f)||"undefined"===p||"null"===p)f[k]={};"object"===e.type(f[k])&&a(g,f[k],m)}else if(g||!(k in f))f[k]=m}return f};e.console=function(a){var b=!1,g=function(){},f={ON:!0,OFF:!1},g={SWITCH:f,turn:function(d){b=f[d?"ON":"OFF"]},log:g,info:g,warn:g,error:g,debug:g};if(!a)return g;a.debug||(a.debug=a.log);a.error||(a.error=a.warn);return e.extend(!0,g,{log:function(d){b===f.ON&&a.log(d)},info:function(d){b===f.ON&&a.info(d)},warn:function(d){b===f.ON&&a.warn(d)},error:function(d){b===
f.ON&&a.error(d)},debug:function(d){b===f.ON&&a.debug(d)}})}.call(h,h.console);e.indexOf=function(a,b){if(a.indexOf)return a.indexOf(b);for(var g=-1,f=0,d=a.length;f<d;f++)if(a[f]===b){g=f;break}return g};e.unique=function(a){for(var b=[],g=0,f=a.length;g<f;g++)-1===e.indexOf(b,a[g])&&b.push(a[g]);return b};e.random=function(){var a={};return function(b,g,f){b=b||0;g="number"===e.type(g)&&!isNaN(g)?g===b?g+10:g:b+10;var d=b+"_"+g;a[d]||(a[d]=[]);a[d].length===g-b&&(a[d]=[],"function"===e.type(f)&&
f.call(this));for(var p;;)if(p=b+~~(Math.random()*(g-b)),-1===e.indexOf(a[d],p)){a[d].push(p);break}return p}}.call(this);e.createElement=function(){return function(a){var b={};e.extend(!0,b,a);a="textarea"===b.el.toLowerCase();var g,f=e.extend(!0,{},b),d=["<",f.el],p=f.el;delete f.el;for(g in f)d.push(" ",g,'="',f[g],'"');d.push(-1===",meta,base,link,img,input,br,hr,area,sharp,".indexOf(","+p+",")?"></"+p+">":" />");g=d.join("");var m,f=!1;try{m=l.createElement(g)}catch(k){f=!0,m=l.createElement(b.el),
delete b.el}if(f)for(var h in b)m[h]=b[h];a&&(m.value=b.value);"input"===m.tagName.toLowerCase()&&(m.type=b.type?b.type:"text");return m}}.call(this);e.event=function(){var a=function(a){return a?function(a,b,f){a.addEventListener(b,f,!1)}:function(a,b,f){a.attachEvent("on"+b,f)}}.call(this,!!h.addEventListener);(function(a){return a?function(a,b,f){a.removeEventListener(b,f)}:function(a,b,f){a.detachEvent("on"+b,f)}}).call(this,!!h.removeEventListener);var b="FOCUS_EVENTS_"+(new Date).valueOf(),
g=function(a,b){for(var c=0,g=b.length;c<g;c++)b[c].handler.apply(this,[a].concat(b[c].params))};return{bind:function(f,d,p){f[b]||(f[b]={});var e=f[b];e[d]||(e[d]=[],a(f,d,function(a){a=a||h.event;g.call(f,a,e[d])}));e[d].push({handler:p,params:[].slice.call(arguments,3)})},remove:function(a,d,c){if(a[b]&&!(a[b]&&!a[b][d]||a[b]&&!a[b][d].length))if(a=a[b][d],c){d=-1;for(var g=0,e=a.length;g<e;g++)if(a[g].handler===c){d=g;break}c=d;-1!=c&&a.splice(c,1)}}}}.call(this);e.feature_upload=function(a){var b=
function(){var b=e.flash,f=(b.version+"").split("."),g=parseInt(f[0],10),k=parseInt(f[1]||0,10),f=parseInt(f[2]||0,10),g=b.has&&(9<g||9===g&&(0<k||0===k&&28<=f));if(b&&b.has&&a.oscpu&&e.browser.firefox&&4<=e.browser.version&&13>=e.browser.version&&(k=/windows\s*nt\s*([\d\.]+)/i.exec(a.oscpu))&&(/^6\.0/.test(k[1])||/^6\.1/.test(k[1]))&&/^11\.3/.test(b.version))g=!1;return g}.call(this),g=function(){if(e.browser.firefox&&3.6>e.browser.version)return!1;var a={},b=l.createElement("input");b.type="file";
b.style.cssText="position:absolute; top:-999px; height:-999px;";l.body.appendChild(b);a.file=!!b.files;a.multiple="multiple"in b&&!(e.browser.apple&&6>e.browser.version);l.body.removeChild(b);delete b;if(!h.XMLHttpRequest)return!1;b=new XMLHttpRequest;a.upload=!!b.upload;a.sendAsBinary=!!b.sendAsBinary;a.FormData=!!h.FormData&&!h.FormData.customized;delete b;return a}.call(this),f=function(){var a={};a.sameDomain=l.domain===(h.location.host||h.location.hostname);return a}.call(this);return{html5:g,
flash:b,iframe:f}}.call(this,h.navigator);e.sizeConvert=function(){var a={KB:1024,MB:1048576,GB:1073741824},b=function(a,b){this.size=a;this.unit=b};b.prototype={toString:function(){return this.size+" "+this.unit},valueOf:function(){return this.size}};var g=/^((?:\d+)(?:\.\d+)?)\s*([A-Za-z]*)$/g,f=/([A-Za-z]+)$/;return{unit2Bytes:function(b){var e=0;f.test(b)?(g.exec(""),(b=g.exec(b))&&(e=(parseFloat(b[1])||0)*(b[2]?a[b[2].toUpperCase()]:1024))):e=parseInt(b)||0;return e||0},bytes2Unit:function(d,
f){var g=0,e=["GB","MB","KB"];f=f||"";if(!f)for(var k=0;k<e.length;k++)if(d>a[e[k]]){f=e[k];break}f&&(g=d/a[f]);return g=new b(g||0,f)}}}.call(this);!h.FormData&&e.feature_upload.html5.sendAsBinary&&(h.FormData=function(a){this.charset=a||"UTF-8";this.reset()},h.FormData.prototype={append:function(a,b){var g="",f=this.EOL,d="--"+this.boundary,p=e.type(b);"object"===p&&(b=JSON.stringify(b),p="string");g=g+(d+f)+"Content-Disposition: form-data; ";"file"===p?(g+='name="'+this.encode(a)+'"; ',g+='filename="'+
this.encode(b.filename||b.name)+'"'+f,g+="Content-Type: "+(b.type?b.type:"application/octet-stream")+f+f,g+=b.getAsBinary()+f):(g+='name="'+this.encode(a)+'"'+f+f,g+=this.encode(b)+f);this.data+=g},getData:function(){return this.data+"--"+this.boundary+"--"+this.EOL},valueOf:function(){return this.getData()},toString:function(){return this.getData()},reset:function(){this.data="";this.boundary="---------------------------71"+(new Date).valueOf().toString(16).replace(/^0x/,"");this.EOL="\r\n"},encode:function(a){return e.transformCharset?
e.transformCharset(a,this.charset):encodeURI(a)}},h.FormData.customized=!0);var k={"*/*":"*.*","image/*":"*.jpg; *.jpeg; *.jpe; *.png; *.gif","image/png":"*.png","image/jpeg":"*.jpg; *.jpeg; *.jpe","image/jpg":"*.jpg; *.jpeg; *.jpe","image/gif":"*.gif","image/bmp":"*.bmp","application/gzip":"*.gz","application/zip":"*.zip","application/vnd.ms-excel":"*.xls","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"*.xlsx","application/msword":"*.doc","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"*.docx",
"application/vnd.ms-powerpoint":"*.ppt","application/vnd.openxmlformats-officedocument.presentationml.presentation":"*.pptx","application/mshelp":"*.hlp; *.chm","application/pdf":"*.pdf","application/mp3":"*.mp3","text/html":"*.html; *.htm; *.xhtml","text/javascript":"*.js","text/css":"*.css","text/plain":"*.txt","default":"*.*"},a=function(a){var b=["image/*","image/jpg","default"],g={},f;for(f in a)-1===e.indexOf(b,f)&&a[f].replace(/[^\;\u0020]+/g,function(a){g[a]=f});return g}(k);e.convert2MimeTypes=
function(c){c=c.split(/[\;\,]\s*/);var b=[],g="";if(c.length){for(var f=/^[^\/]+\/[^\/]+$/,d=0;d<c.length;d++)if(f.test(c[d]))b.push(c[d]);else if(c[d]in a&&"*.*"!==c[d])b.push(a[c[d]]);else{g="*/*";break}g||(g=e.unique(b).join(", "))}else g="*/*";return g};e.convertMimeTypes=function(a){a=a.split(/[\;\,]\s*/);var b=[],g="";if(a.length){for(var f=/^[^\\\/]+\.[^\\\/]+$/,d=0;d<a.length;d++)if(f.test(a[d]))b.push(a[d]);else if(a[d]in k&&"*/*"!==a[d])b.push(k[a[d]]);else{g="*.*";break}g||(g=e.unique(b).join("; "))}else g=
"*.*";return g};e.mimeValidation=function(a,b){if(-1!==(a+"").indexOf("*/*"))return!0;b+="";"string"===e.type(a)&&(a=a.split(/[\;\,\s]+/));var g=!1,f=/^([^\/]+)\/([^\/]+)$/,d=f.exec(b),p;if(!d)return!1;for(var m=0;m<a.length;m++)if(p=f.exec(a[m]),a[m]===b||p[1]===d[1]&&("*"===p[2]||p[2]===d[2])){g=!0;break}return g};e.addClass=function(a,b){var g=e.trim(a.className).split(/\s+/);"string"===e.type(b)&&[].push.apply(g,b.split(/\s+/));a.className=e.unique(g).join(" ")};e.removeClass=function(a,b){var g=
e.unique(e.trim(a.className).split(/\s+/));b="string"===e.type(b)?b.split(/\s+/):[];var f;for(f=-1;b.length;)f=b.shift(),f=e.indexOf(g,f),-1!==f&&g.splice(f,1);a.className=g.join(" ")}}.call(FOCUS,this,this.document);
void function(h,l,n){this.namespace("FOCUS.widget");var e=this.util,k=this.widget,a=function(){},c=function(){var a=e.feature_upload;return{flash:a.flash,html5:a.html5&&a.html5.upload&&(a.html5.sendAsBinary||a.html5.FormData),iframe:!0}}.call(this),b=k.Upload=function(a){b.__defaults__();this.cfg=e.extend(!0,{},b.defaults);this.set(a);b.plugins.UploadEvents&&(this.uploadEvents=new b.plugins.UploadEvents(this.cfg.events),this.set({events:this.uploadEvents.events}));this._={};this.init();return this.instance};
b.prototype={init:function(){var a=this,f=this.cfg.priority;if(this.cfg.css.uri){var d;d=/^https?:\/\/|^\//i.test(this.cfg.css.uri)?this.cfg.css.uri:FOCUS.BASEPATH+"css/"+this.cfg.css.uri;if(!b.__LOADED_CSS__[d]){var p=l.createElement("link");p.rel="stylesheet";p.href=d;l.getElementsByTagName("head")[0].appendChild(p);b.__LOADED_CSS__[d]=!0}}var m;for(d=0;d<f.length;d++)if(c[f[d]]){m=f[d];break}f={html5:"Upload_HTML5",flash:"Upload_Flash",iframe:"Upload_Iframe"};if(m){if(m===b.MODE.FLASH){for(var h in this.cfg.events)this.cfg.events[h]=
function(a,d){var f=b.File4Flash;return function(b){b&&b.id?a.apply(this,[new f(b)].concat([].slice.call(arguments,1))):a.apply(this,[].slice.call(arguments,0))}}.call(this,this.cfg.events[h],h);this.cfg.fileTypes=e.convertMimeTypes(this.cfg.fileTypes);this.cfg.events.ready=function(b){return function(){setTimeout(function(){b.call(a.instance,m)},25)}}(this.cfg.events.ready)}else this.cfg.fileTypes=e.convert2MimeTypes(this.cfg.fileTypes);this.instance=new k[f[m]](this.cfg);m!==b.MODE.FLASH&&setTimeout(function(){a.cfg.events.ready.call(a.instance,
m)},25);h=b.plugins;h.UploadEvents&&(this.uploadEvents.bindThisObj(this.instance),"on,one,off,fire".replace(/(\w+)/g,function(b){a.instance[b]=function(){a.uploadEvents[b].apply(a.uploadEvents,arguments);return a.instance}}));for(var n in h)n.replace(/([\$\^\[\]\\\/\,\?\:\|\{\}\!\(\)\*\-\+])/g,"\\$1"),"UploadEvents"!==n&&RegExp("(^|,)"+n+"(,|$)").exec(this.cfg.plugins)&&h[n].call(this.instance,this.instance.mode)}else throw"not support this constructor.";},set:function(a){var f=this.cfg.plugins;a&&
(a.plugins&&"string"===e.type(a.plugins))&&(f+=","+a.plugins,f=e.unique(f.split(/[,;\s]+/)).join(","));var d=a&&a.skin,c={},m=a&&a.css||{};d&&d in b.CSS&&(c=b.CSS[d]);m=e.extend(!0,{},b.CSS.DEFAULT,this.cfg.css,c,m);e.extend(!0,this.cfg,a,{css:m});this.cfg.plugins=f}};b.__defaults__=function(){return b.defaults?b.defaults:b.defaults={priority:b.PRIORITY.DEFAULT,events:{ready:a,loadFailed:a,dialogStart:a,dialogComplete:a,queued:a,queueError:a,uploadStart:a,uploadProgress:a,uploadSuccess:a,uploadError:a,
uploadComplete:a},button:{text:"Upload"},multiple:!0,sizeLimit:-1,uploadLimit:-1,queueLimit:-1,fileTypes:b.MIME_TYPE.ALL,uploadURL:"",filePostName:"",placeholder:"#uploader",debug:!1,plugins:"UploadEvents,AutoDisabled,Ready,Patch4Charset",fileTypesDescription:"All Files",skin:"DEFAULT"}}}.call(FOCUS,this,this.document);
void function(h,l,n){var e=this.widget.Upload,k=this.util;h=e.MODE={HTML5:"html5",FLASH:"flash",IFRAME:"iframe",DEFAULT:"html5"};e.PRIORITY={DEFAULT:[h.HTML5,h.FLASH,h.IFRAME]};e.MIME_TYPE={ALL:"*/*",IMAGE:"image/*",JPG:"image/jpeg",JPEG:"image/jpeg",PNG:"image/png",GIF:"image/gif",PDF:"application/pdf",DOC:"application/msword",DOCX:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",XLS:"application/vnd.ms-excel",XLSX:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",
PPT:"application/vnd.ms-powerpoint",PPTX:"application/vnd.openxmlformats-officedocument.presentationml.presentation",TXT:"text/plain",UNKNOWN:"application/octet-stream"};e.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130,CHAIN_ERROR:-140};e.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,
UPLOAD_STOPPED:-290,RESIZE:-300,TIMEOUT:-310};e.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5,NEW:-6};e.UPLOAD_TYPE={SINGLE:1,MULTI:2};e.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120,JAVASCRIPT:-130,NONE:-130};e.CURSOR={POINTER:-2,DEFAULT:-1};e.CSS={DEFAULT:{uri:"",WRAP:"FOCUS_UPLOAD_wrap upload-wrap",SELECTOR:"FOCUS_UPLOAD_selector upload-selector",FLASH:"FOCUS_UPLOAD_flashWrap upload-flashwrap",TEXT:"FOCUS_UPLOAD_text upload-text",DISABLED:"FOCUS_UPLOAD_wrap_disabled upload-wrap-disabled",
HOVER:"FOCUS_UPLOAD_wrap_hover upload-wrap-hover"},LARGE:{uri:"",WRAP:"large-upload-wrap",SELECTOR:"large-upload-selector",FLASH:"large-upload-flashwrap",TEXT:"large-upload-text",DISABLED:"large-upload-wrap-disabled",HOVER:"large-upload-wrap-hover"}};e.addSkin=function(a,b){e.CSS[a]=k.extend(!0,{},{uri:"",WRAP:"",SELECTOR:"",FLASH:"",TEXT:"",DISABLED:"",HOVER:""},b)};e.removeSkin=function(a){delete e.CSS[a+""]};e.__LOADED_CSS__={};e.CHARSET={UTF8:"UTF-8",GBK:"GBK",GB2312:"GB2312",BIG5:"BIG5",DEFAULT:"UTF-8"};
e.TURNING={ON:!0,OFF:!1};var a=function(a,b){b=b||{};var g=a.split(/\./);b.suffix=1<g.length?g.pop():"";b.name=g.join(".");return b};e.File=function(c){var b={data:c};b.id="FOCUS_UPLOAD_"+(k.random(0,1E6)+~~((new Date).valueOf()/1E7)).toString(16).toUpperCase();if(c.tagName&&"input"===c.tagName.toLowerCase()&&"file"===c.type){if(c=/[^\/\\]+$/.exec(c.value))b.fullname=c[0],a(b.fullname,b);b.type=b.suffix?b.suffix.toUpperCase()in e.MIME_TYPE?e.MIME_TYPE[b.suffix.toUpperCase()]:"":""}else b.size=c.filesize||
c.size||0,b.type=c.type||"",b.fullname=c.filename||c.name||"",a(b.fullname,b),b.type||(b.type=b.suffix?b.suffix.toUpperCase()in e.MIME_TYPE?e.MIME_TYPE[b.suffix.toUpperCase()]:"":"");b.status=e.FILE_STATUS.NEW;return b};e.File4Flash=function(c){this.data=c;this.id=c.id;this.size=c.size;this.status=c.filestatus;a(c.name,this);c.type&&(this.suffix=c.type.replace(/^\./,""));this.type=e.MIME_TYPE[this.suffix.toUpperCase()]||"";this.fullname=c.name}}.call(FOCUS,this,this.document);
void function(h,l){FOCUS.namespace("FOCUS.widget");var n=function(){},e=this.util,k=this.widget,a=k.Upload,c=a.MODE,b=a.UPLOAD_ERROR,g=a.FILE_STATUS;k.UploadBase=function(){};k.UploadBase.prototype={init:n,set:function(a){this.cfg=e.extend(!0,this.cfg,a)},debug:function(a){e.log.turn(!!a)},startUpload:n,getFile:n,cancelUpload:function(a){var d=this.getQueueFile();if(d){d.status=g.CANCELLED;if("function"===e.type(a))this.one("uploadError",a);this.cfg.events.uploadError.call(this,d,b.FILE_CANCELLED,
"file cancelled.");this.elems.poster&&this.elems.poster.abort()}},stopUpload:function(a){var d=this.getQueueFile();if(d){d.status=g.QUEUED;if("function"===e.type(a))this.one("uploadError",a);this.cfg.events.uploadError.call(this,d,b.UPLOAD_STOPPED,"upload stopped.");this.elems.poster&&this.elems.poster.abort();this._.queue.unshift(d)}},getQueueFile:function(a){a=a||0;var b=e.type(a),c=this._.queue,g=null;if("number"===b)a<=c.length-1&&(g=c[a]);else if("string"===b)for(b=0;b<c.length;b++)if(c[b].id===
a){g=c[b];break}return g},setPostParam:function(a){this.cfg.postParams||(this.cfg.postParams={});e.extend(!0,this.cfg.postParams,a)},addPostParam:function(a,b){this.cfg.postParams||(this.cfg.postParams={});this.cfg.postParams[a]=b},removePostParam:function(a){!this.cfg.postParams||!a?this.cfg.postParams={}:a in this.cfg.postParams&&delete this.cfg.postParams[a]},setUploadURL:function(a){this.cfg.uploadURL=a+""},setFilePostName:function(a){this.cfg.filePostName=a+""},setFileTypes:function(a){switch(this.mode){case c.IFRAME:case c.HTML5:this.cfg.fileTypes=
this.elems.selector.accept=e.convert2MimeTypes(a)}},setFileSizeLimit:function(a){this.cfg.sizeLimit=a},setFileQueueLimit:function(a){this.cfg.queueLimit=a;this.elems.selector.multiple=1!==a},text:function(a){return"undefined"===typeof a?this.elems.text&&this.elems.text.innerHTML:this.elems.text&&(this.elems.text.innerHTML=a+"")},__setStyle:function(a,b,c,g){var k=this.cfg.css;b.className=k.WRAP;e.browser.firefox&&(c.size=6);c.className=k.SELECTOR;a=b.getElementsByTagName("label");a.length&&b.removeChild(a[0]);
a=l.createElement("label");a.className=k.TEXT;a.innerHTML=g;b.insertBefore(a,c);e.event.bind(b,"mouseover",function(a){a.cancelBubble=!0;a.returnValue=!1;e.addClass(b,k.HOVER)});e.event.bind(b,"mouseout",function(a){a.cancelBubble=!0;a.returnValue=!1;e.removeClass(b,k.HOVER)});this.elems.text=a},__translateStatus:function(b){var d=e.type(b);"string"===d?(b=e.trim(b),b=b.length?!!a.TURNING[b.toUpperCase()]:a.TURNING.OFF):b="undefined"===d?!this._.status:!!b;return b},turn:function(a){var b=this.cfg.css;
a=this.__translateStatus(a);a!==this._.status&&(this.elems.selector.disabled=!a,this._.status=a,e[a?"removeClass":"addClass"](this.elems.holder,b.DISABLED))},open:function(){(this.mode===c.IFRAME||this.mode===c.HTML5)&&this.elems.selector&&this.elems.selector.click()},multiple:function(a){this.elems.selector.multiple=!!a},queue:function(){},dequeue:function(a){if(this.mode===c.IFRAME||this.mode===c.HTML5)switch(e.type(a)){case "string":for(var b=0;b<this._.queue.length;b++)if(this._.queue[b].id===
a){a=b;break}case "number":this._.queue.splice(a,1);break;case "boolean":a?this._.queue.splice(0):this._.queue.splice(0,1)}else if(this.mode===c.FLASH)switch(e.type(a)){case "string":case "number":this.instance.cancelUpload(a,!1);break;case "undefined":a=!1;case "boolean":if(a)for(;a=this.instance.getQueueFile();)this.instance.cancelUpload(a.file_id,!1);else this.instance.cancelUpload(0,!1)}}}}.call(FOCUS,this,this.document);
void function(h,l){var n=this.namespace("FOCUS.widget.Upload.plugins"),e=this.util,k=this.widget.Upload.UPLOAD_ERROR,a=function(a,c){this.type=a;this.listeners=[];this._={thisObj:c}};a.prototype={__search:function(a,c){for(var f=-1,d=c||0;d<this.listeners.length;d++)if(this.listeners[d].handle===a){f=d;break}return f},add:function(a,c){var f=a.handles,d=a.thisObj||null,k=a.once||!1;c=[].slice.call(arguments,1);"function"===e.type(f)&&(f=[f]);if("array"===e.type(f))for(var m=0;m<f.length;m++)"function"===
e.type(f[m])&&this.listeners.push({handle:f[m],thisObj:d,once:!!k,args:c})},one:function(a,c){"object"===e.type(a)&&(a.once=!0,this.add(a,[].slice.call(arguments,1)))},remove:function(a){if(a){"function"===e.type(a)&&(a=[a]);for(var c,f=0;f<a.length;f++)"function"===e.type(a[f])&&-1!==(c=this.__search(a[f]))&&this.listeners.splice(c,1)}else this.listeners=[]},exec:function(a){for(var c,f=[],d=0;d<this.listeners.length;d++)c=this.listeners[d],c.once&&f.push(c.handle),c.handle.apply(c.thisObj||this._.thisObj||
this,[].concat.call(c.args,[].slice.call(arguments)));this.remove(f)},bindThisObj:function(a){this._.thisObj=a}};var c=function(a,c){this._={events:{},thisObj:c};this.events={};for(var f in a)this.on(f,a[f]),this.events[f]=function(a){var b=this;return"uploadError"===a?function(c,g,f){switch(g){case k.FILE_CANCELLED:b.fire.apply(b,["cancel",c,k.FILE_CANCELLED,"file cancelled."]);break;case k.UPLOAD_STOPPED:b.fire.apply(b,["stop",c,k.UPLOAD_STOPPED,"upload stopped."]);break;default:b.fire.apply(b,
[a].concat([].slice.call(arguments)))}}:function(){b.fire.apply(b,[a].concat([].slice.call(arguments)))}}.call(this,f)};c.prototype={__initEvent:function(b,c,f){b in this._.events||(this._.events[b]=new a(b,this._.thisObj));return{handles:c,thisObj:f}},on:function(a,c,f,d){var e=this.__initEvent(a,c,f);this._.events[a].add.apply(this._.events[a],[e].concat([].slice.call(arguments,3)))},off:function(a,c){a in this._.events&&this._.events[a].remove(c)},one:function(a,c,f,d){var e=this.__initEvent(a,
c,f);this._.events[a].one.apply(this._.events[a],[e].concat([].slice.call(arguments,3)))},fire:function(a,c){a in this._.events&&this._.events[a].exec.apply(this._.events[a],[].slice.call(arguments,1))},bindThisObj:function(a){this._.thisObj=a;for(var c in this._.events)this._.events[c].bindThisObj(a)}};n.UploadEvents=c}.call(FOCUS,window,window.document);
void function(){this.namespace("FOCUS.widget.Upload.plugins").AutoDisabled=function(h){this.on("uploadStart",function(){this.turn("off")}).on("uploadSuccess",function(){this.turn("on")}).on("uploadError",function(){this.turn("on")})}}.call(FOCUS);
void function(){var h=this.util;this.widget.Upload.plugins.Ready=function(l){var n=!1,e=this,k=[],a=function(){for(;k.length;)k.shift().call(e,l)};this.on("ready",function(){this.isReady=n=!0;a()});this.ready=function(c){"function"===h.type(c)&&k.push(c);n&&a()}}}.call(FOCUS);
void function(h,l,n){var e=this,k=this.util;n=this.widget.Upload;var a=n.MODE,c=this.UUID;n.plugins.Patch4Charset=function(b){if(b===a.HTML5&&(swfobject&&k.flash.has&&h.FormData&&h.FormData.customized)&&(b="FOCUS_UPLOAD_PATCH_CHARSET_"+c,!swfobject.getObjectById(b))){var g=l.createElement("div");g.style.cssText=";position:absolute; top:0; right:2px; float:none; display:block; width:1px; height:1px; margin:0; padding:0; border:0 none; font-size:0; line-height:0; background-color:transparent;";var f=
l.createElement("span");f.id=b;l.body.appendChild(g);g.appendChild(f);swfobject.embedSWF(this.cfg.pathCharset||e.PATH_CHARSET||e.BASEPATH+"widget/upload/html5/transformCharset/transformCharset.swf",f.id,1,1,"9.0.0",null,null,null,null,function(){var a=h.setInterval(function(){var b=swfobject.getObjectById(f.id);b&&(h.clearInterval(a),k.transformCharset=function(a,d){return b.transformCharset(a,d||"UTF-8")})},25)})}}}.call(FOCUS,this,document);
void function(h,l,n){h=this.namespace("FOCUS.widget.io.iframe");var e=this.util,k=e.createElement;l=function(){this.elems={}};l.prototype={_:{text:function(a,c){return k({el:"textarea",name:a,value:c+""})},radio:function(a,c,b){return k({el:"input",type:"radio",name:a,value:c,checked:!!b})},checkbox:function(a,c,b){return k({el:"input",type:"checkbox",name:a,value:c,checked:!!b})},file:function(a,c){if(a)return c&&c.name&&(a.name=c.name),a;var b={el:"input",type:"file"};e.extend(!0,b,c);return k(b)},
clone:function(a){return a.cloneNode(!0)}},append:function(a,c){var b=e.type(c),g;"string"!==b&&"file"===c.type?g=this._.file(c,{name:a}):"string"===b&&(g=this._.text(a,c+""));this.elems[a]=g}};h.IO_FormData=l}.call(FOCUS,window,document);
void function(h,l,n){n=this.namespace("FOCUS.widget.io.iframe");var e=function(){},k=this.util,a=k.createElement,c=function(a){this.cfg={events:{load:e,error:e},timeout:1E5,charset:"UTF-8"};k.extend(!0,this.cfg,a);this.elems={};this._={};this.init()};c.prototype={init:function(){var b=this;this.elems.io=a({el:"iframe",name:"FOCUS_UPLOAD_IO_"+k.random(0,1E3),src:k.browser.msie?"javascript:document.open();"+(l.domain===h.location.hostname?"":"document.domain='"+l.domain+"';")+"void(0)":"about:blank"});
this.elems.io.style.cssText="position:absolute; width:1px; height:1px; top: -9999px; left:-9999px;";l.body.appendChild(b.elems.io);setTimeout(function(){b.elems.win=b.elems.io.contentWindow;b.elems.doc=b.elems.io.contentWindow.document},25);this._.timer=-1;this._.handle={load:function(){if(b._.submited){clearTimeout(b._.timer);var a=b._.handle.getData(b.elems.io);"undefined"===k.type(a)?b.cfg.events.error.call(this,"IO_ERROR"):b.cfg.events.load.call(this,a);b._.submited=!1;setTimeout(function(){b._deleteForm()},
25)}},error:function(){b.cfg.events.error.call(this);b._.submited=!1},getData:function(a){var c;try{c=b.__cleanData(a.contentWindow.document.body.innerHTML)}catch(d){}return c}};this.elems.io.attachEvent?this.elems.io.attachEvent("onload",this._.handle.load):this.elems.io.onload=this._.handle.load},open:function(a,c){this._.openCfg={method:"GET"===a.toUpperCase()?"GET":"POST",action:c}},send:function(b,c){var f=this;setTimeout(function(){var d={el:"form",name:"FOCUS_UPLOAD_FORM_"+k.random(0,1E3),
method:f._.openCfg.method,action:f._.openCfg.action||""};d.target=f.elems.io.name;var e=[],m=!1,h,n;for(n in b.elems)h=b.elems[n],"file"===h.type&&(m=!0),e.push(h);d.enctype=m?"multipart/form-data":"application/x-www-form-urlencoded";f._deleteForm();var y=f.elems.__submit_form=a(d);y.style.cssText="position:absolute; width:1px; height:1px; top: -9999px; left:-9999px;";for(l.body.appendChild(y);e.length;)y.appendChild(e.shift());c=c||f.cfg.charset||"UTF-8";var A;k.browser.msie&&(A=l.charset);k.browser.msie?
l.charset=c:y.acceptCharset=c;setTimeout(function(){f._.submited=!0;y.submit();setTimeout(function(){k.browser.msie&&(l.charset=A)},1)},25)},100)},onload:function(a){this.cfg.events.load=a},onerror:function(a){this.cfg.events.error=a},overrideGetData:function(a){this._.handle.getData=a},setUrl:function(a){this.elems.__submit_form.action=a},_deleteForm:function(){try{this.elems.__submit_form&&this.elems.__submit_form.parentNode.removeChild(this.elems.__submit_form)}catch(a){}delete this.elems.__submit_form},
_deleteIO:function(){try{this.elems.io&&(this.__removeOnloadEvent(),this.elems.io.parentNode.removeChild(this.elems.io))}catch(a){}delete this.elems.doc;delete this.elems.win;delete this.elems.io},dispose:function(){this._deleteForm();this._deleteIO()},__removeOnloadEvent:function(){this.elems.io&&(this.elems.io.detachEvent?this.elems.io.detachEvent("onload",this._.handle.load):this.elems.io.onload=e)},__cleanData:function(a){for(var c=[/<\s*(script|style|div|p|a|table|iframe)[\s\S]*?<\s*\/\s*\1\s*>/gi,
/<\s*(link|img|input)[\s\S]*?>/gi,/(^|)\<\/?pre[^\>]*\>(|$)/gi,/\x3c!--.*?--\x3e/gi,/^[\s\u00A0]+|[\s\u00A0]+$/g],f=0;f<c.length;f++)c[f].exec(""),a=a.replace(c[f],"");return a}};n.IO_Iframe=c}.call(FOCUS,window,document);
void function(h,l,n){h=this.namespace("FOCUS.widget.io.iframe");var e=h.IO_FormData,k=h.IO_Iframe,a=this.util,c=function(){};l=function(a){this.cfg={events:{error:c,load:c,progress:c,abort:c},progressURL:"",charset:"UTF-8",timeout:1E5};this._={cancel:!1,timeout:!1,loaded:!1,timeoutTimer:-1};this.elems={};this.set(a);this.init()};l.prototype={init:function(){var b=this;this._.getProgress=function(){var c=arguments.callee;if(b.cfg.progressURL&&!b._.loaded){b.elems.io_progress=new k;b.elems.io_progress.onload(function(d){setTimeout(function(){b.elems.io_progress.dispose()},
25);b._.loaded||(d=a.JSON.parse(d),b.cfg.events.progress.call(d),setTimeout(function(){c()},100))});b.elems.io_progress.open("GET",b.cfg.progressURL,!0);var f=new e;f.append("progress","loaded");b.elems.io_progress.send(f)}}},send:function(a){if(!this._.cancel){var c=this;this._.timeoutTimer=setTimeout(function(){c.timeout()},this.cfg.timeout);this.elems.io.send(a,this.cfg.charset);setTimeout(function(){c._.cancel||c.cfg.events.progress.call(c,{loaded:0,total:100})},1);this._.getProgress()}},open:function(a,
c){this._.fullProgress=!1;this.reset();this.elems.io.open(a,c)},set:function(b){a.extend(!0,this.cfg,b)},reset:function(){var a=this;this.elems.io&&this.elems.io.dispose();this.elems.io_progress&&this.elems.io_progress.dispose();this.elems.io=new k({timeout:this.cfg.timeout});this.elems.io.onload(function(c){a._.timeout||(a._.fullProgress||(a.cfg.events.progress.call(a,{loaded:100,total:100}),a._.fullProgress=!0),clearTimeout(a._.timeoutTimer),a._.cancel||(a._.loaded=!0,a.cfg.events.load.call(a,c,
this)))});this.elems.io.onerror(function(c){clearTimeout(a._.timeoutTimer);a._.cancel||a.cfg.events.error.call(a,this,c)});this._.cancel=!1;this._.timeout=!1;this._.loaded=!1;this._.timeoutTimer=-1},dispose:function(){this.elems.io&&(this.elems.io.dispose(),delete this.elems.io);this.elems.io_progress&&(this.elems.io_progress.dispose(),delete this.elems.io_progress)},timeout:function(){this._.timeout=!0;this.elems.io.__removeOnloadEvent();this.cfg.events.error.call(this,this,"timeout")},abort:function(){this._.cancel=
!0;clearTimeout(this._.timeoutTimer);this.elems.io&&this.elems.io.__removeOnloadEvent();this.cfg.events.abort()}};h.Poster=l}.call(FOCUS,window,document);
void function(h,l,n){var e=function(){},k=this.util,a=this.widget,c=a.Upload,b=c.MODE,g=c.UPLOAD_ERROR,f=c.FILE_STATUS,d=c.QUEUE_ERROR,p=k.createElement,m=a.io.iframe,u=m.Poster,x=m.IO_FormData;a.Upload_Iframe=function(a){this.constructor=arguments.callee;this.mode=b.IFRAME;this.elems={};this.cfg={events:{ready:e,loadFailed:e,dialogStart:e,dialogComplete:e,queued:e,queueError:e,uploadStart:e,uploadProgress:e,uploadSuccess:e,uploadError:e,uploadComplete:e},button:{text:"Upload"},multiple:!0,sizeLimit:-1,
queueLimit:-1,fileTypes:c.MIME_TYPE.ALL,fileTypesDescription:"All Files",uploadURL:"",filePostName:"",placeholder:"#uploader",charset:c.CHARSET.DEFAULT,debug:!1,timeout:1E5};this._={queue:[],uploadingFile:null,uploadedFile:[],status:c.TURNING.ON};this.set(a);this.init()};a.Upload_Iframe.prototype=new FOCUS.widget.UploadBase;k.extend(!0,a.Upload_Iframe.prototype,{init:function(){var a=this;this.elems.holder=p({el:"div"});this.elems.holder.style.cssText="";var b={missing_url:[g.MISSING_UPLOAD_URL,"missing upload URL."],
invalid_filetype:[d.INVALID_FILETYPE,"File is not an allowed file type."],size_limit:[d.FILE_EXCEEDS_SIZE_LIMIT,"File size exceeds allowed limit."],chain_error:[d.CHAIN_ERROR,"Some reason to occured chain error."]};k.extend(this._,{open:function(b){var d=new x;if("object"===k.type(a.cfg.postParams))for(var c in a.cfg.postParams)d.append(c,a.cfg.postParams[c]);d.append(a.cfg.filePostName||b.id,b.data);a.elems.poster.open("POST",a.cfg.uploadURL,!0);return d},post:function(b){a.elems.poster.send(b)},
start:function(d){if(d=a.getQueueFile())!a.cfg.uploadURL||"string"!==k.type(a.cfg.uploadURL)?(a.cfg.events.uploadError.apply(a,[d].concat(b.missing_url)),a.stopUpload()):(d.status=f.IN_PROGRESS,a._.uploadingFile=d,a.cfg.events.uploadStart.call(a,d),d=a._.open(d),a._.post(d))},dialogStart:function(b){b=b||h.event;b.stopPropagation?b.stopPropagation():b.cancelBubble=!0;a.cfg.events.dialogStart.call(a)},__queued:function(e,g){var m=[],h=[],p=a._.queue,l=new c.File(this);if(this.files&&(!k.browser.firefox||
k.browser.firefox&&3.6<=k.browser.version)){var n=[],u=!1,x;if(-1!==a.cfg.queueLimit&&this.files.length+a._.queue.length>a.cfg.queueLimit){for(var s=0,v=this.files.length;s<v;s++)x=new c.File(this.files[s]),m.push(x),a.cfg.events.queueError.call(a,x,d.QUEUE_LIMIT_EXCEEDED,a.cfg.queueLimit);u=!0}else for(var H=k.sizeConvert.unit2Bytes(a.cfg.sizeLimit),s=0,v=this.files.length;s<v;s++){x=new c.File(this.files[s]);m.push(x);var B;if(k.mimeValidation(a.cfg.fileTypes,x.type)){if(-1!==H&&(x.fileSize||x.size)>
H)B=b.size_limit}else B=b.invalid_filetype;B?(a.cfg.events.queueError.apply(a,[x].concat(B)),u=!0):n.push(x)}if(u){s=0;for(v=n.length;s<v;s++)n[s].id=l.id,a.cfg.events.queueError.apply(a,[n[s]].concat(b.chain_error))}else{s=0;for(v=n.length;s<v;s++)n[s].status=f.QUEUED,n[s].id=l.id,a.cfg.events.queued.call(a,n[s]);h=h.concat(n);p.push(l)}delete n}else m.push(l),FOCUS.util.mimeValidation(a.cfg.fileTypes,l.type)?(h.push(l),p.push(l),l.status=f.QUEUED,a.cfg.events.queued.call(a,l)):a.cfg.events.queueError.apply(a,
[l].concat(b.invalid_filetype));e&&(a.elems.selector.parentNode.removeChild(a.elems.selector),a.elems.selector=a._._crateSelector(a.elems.holder,a._.dialogStart,a._.dialogComplete));"function"===FOCUS.util.type(g)&&g.call(a,m.length,h.length,p.length);delete m;delete h;delete p},dialogComplete:function(b){b=b||h.event;b.stopPropagation?b.stopPropagation():b.cancelBubble=!0;a._.__queued.call(this,!0,a.cfg.events.dialogComplete)},uploadProgress:function(b){var d=a.getQueueFile();d&&(d.status=f.IN_PROGRESS,
b.loaded===b.total&&(d.fullProgress=!0),a.cfg.events.uploadProgress.call(a,d,b.loaded,b.total))},uploadSuccess:function(b,d){var c=a.elems.poster,f=a.getQueueFile();f&&a.cfg.events.uploadSuccess.call(a,f,b,c)},uploadError:function(b,d){d=(d||"").toUpperCase();var c=a.getQueueFile();c&&(c.status=f.ERROR,a.cfg.events.uploadError.call(a,c,g[d?d:"UPLOAD_FAILED"],d?d:"TIMEOUT"),a._.uploadComplete(!0))},uploadComplete:function(b,d){var c=a.getQueueFile();c&&(!b&&(!c.fullProgress&&!d)&&(a._.uploadProgress.call(a,
{loaded:c.size,total:c.size}),c.fullProgress=!0),d||(c.status=f.COMPLETE),a._.queue.shift(),a._.uploadingFile=null,a.cfg.events.uploadComplete.call(a,c))},complete:function(b,d){a._.uploadSuccess.call(a,b,d);a._.uploadComplete.call(a);setTimeout(function(){a.elems.poster&&(a.elems.poster.dispose(),delete a.elems.poster)},25)},abort:function(){setTimeout(function(){a._.uploadComplete(!1,!0)},1)},_crateSelector:function(b,d,c){var f=p({el:"input",type:"file",name:"FOCUS_FILE_"+k.random(0,100),multiple:!!a.cfg.multiple});
b.appendChild(f);k.event.bind(f,"click",d);k.event.bind(f,"change",c);a.__setStyle("iframe",a.elems.holder,f,a.cfg.button.text);return f}});var e=k.query?k.query(this.cfg.placeholder):l.getElementById(this.cfg.placeholder.replace(/^#/,""));e&&("length"in e&&(e=e[0]),e&&(e.parentNode.insertBefore(this.elems.holder,e),a.elems.selector=this._._crateSelector(this.elems.holder,this._.dialogStart,this._.dialogComplete),e.parentNode.removeChild(e)))},startUpload:function(){this.elems.poster&&this.elems.poster.dispose();
this.elems.poster=new u({events:{abort:this._.abort,load:this._.complete,error:this._.uploadError,progress:this._.uploadProgress},progressURL:this.cfg.progressURL,charset:this.cfg.charset,timeout:this.cfg.timeout||1E5});this._.start()},queue:function(a,b){if(a){a.length===n&&(a=[a]);for(var d=0;d<a.length;d++)this._.__queued.call(a[d],!1,b)}}})}.call(FOCUS,this,this.document);
void function(h,l,n){var e=function(){},k=this.util;n=this.widget;var a=n.Upload,c=a.MODE,b=a.UPLOAD_ERROR,g=a.FILE_STATUS,f=a.QUEUE_ERROR;n.Upload_HTML5=function(b){this.constructor=arguments.callee;this.mode=c.HTML5;this.elems={};this.cfg={events:{ready:e,loadFailed:e,dialogStart:e,dialogComplete:e,queued:e,queueError:e,uploadStart:e,uploadProgress:e,uploadSuccess:e,uploadError:e,uploadComplete:e},button:{text:"Upload"},multiple:!0,sizeLimit:-1,queueLimit:-1,fileTypes:a.MIME_TYPE.ALL,fileTypesDescription:"All Files",
uploadURL:"",filePostName:"",placeholder:"#uploader",charset:a.CHARSET.DEFAULT,debug:!1,timeout:1E5};this._={queue:[],uploadingFile:null,cancel:!1,status:a.TURNING.ON};this.set(b);this.init()};n.Upload_HTML5.prototype=new n.UploadBase;k.extend(!0,n.Upload_HTML5.prototype,{init:function(){var d=this;this._.start=function(){var a=d.getQueueFile();a&&(!d.cfg.uploadURL||"string"!==k.type(d.cfg.uploadURL)?(d.cfg.events.uploadError.call(d,a,b.MISSING_UPLOAD_URL,"missing upload url."),d.stopUpload()):(a.status=
g.IN_PROGRESS,d._.uploadingFile=a,d.cfg.events.uploadStart.call(d,a),d._.post(a)))};this._.success=function(a){a=d.elems.poster;var b=d.getQueueFile();d.cfg.events.uploadSuccess.call(d,b,a.responseText||a.responseXML,a)};this._.error=function(a,c,f){if(!d._.cancel&&(a=d.getQueueFile()))a.status=g.ERROR,d.cfg.events.uploadError.call(d,a,c||b.UPLOAD_FAILED,f||""),d._.uploadComplete()};this._.abort=function(a){d._.cancel=!0;d._.uploadComplete(!0)};this._.progress=function(a){var b=d.getQueueFile();b&&
(a.loaded===a.total&&(b.fullProgress=!0),d.cfg.events.uploadProgress.call(d,b,a.loaded,a.total))};this._.post=function(a){d.elems.poster.open("POST",d.cfg.uploadURL,!0);var b;b=FormData.customized?new FormData(d.cfg.charset):new FormData;if("object"===k.type(d.cfg.postParams))for(var c in d.cfg.postParams)b.append(c,d.cfg.postParams[c]);b.append(d.cfg.filePostName||a.id,a.data);k.feature_upload.html5.FormData?d.elems.poster.send(b):(d.elems.poster.setRequestHeader("Content-Type","multipart/form-data; boundary="+
b.boundary),d.elems.poster.sendAsBinary(b))};this._.uploadComplete=function(a){var b=d.getQueueFile();b&&(b.fullProgress||(d._.progress.call(d,{loaded:b.size,total:b.size}),b.fullProgress=!0),a||(b.status=g.COMPLETE),d._.queue.shift(),d._.uploadingFile=null,d.cfg.events.uploadComplete.call(d,b))};this._.xhrComplete=function(a){if(4===this.readyState)switch(this.status){case 200:d._.success.call(this,a);d._.uploadComplete();break;case 404:case 500:d._.error.call(this,a,b.HTTP_ERROR,this.status)}};
this._.dialogStart=function(a){a=a||h.event;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0;d.cfg.events.dialogStart.call(d)};this._.__queued=function(b,c){var e=!b,h=[],p=[],l=d._.queue,n;b=b||d.elems.selector.files;h=[].slice.call(b);if(-1!==d.cfg.queueLimit&&h.length+d._.queue.length>d.cfg.queueLimit)for(var w=0,D=h.length;w<D;w++)d.cfg.events.queueError.call(d,h[w],f.QUEUE_LIMIT_EXCEEDED,d.cfg.queueLimit);else{w=0;for(D=h.length;w<D;w++)if(n=new a.File(h[w]),n.status=g.ERROR,FOCUS.util.mimeValidation(d.cfg.fileTypes,
n.type))if(0===(n.fileSize||n.size))d.cfg.events.queueError.call(d,n,f.ZERO_BYTE_FILE,"File is zero bytes and cannot be uploaded.");else{var I=k.sizeConvert.unit2Bytes(d.cfg.sizeLimit);-1!==I&&(n.fileSize||n.size)>I?d.cfg.events.queueError.call(d,n,f.FILE_EXCEEDS_SIZE_LIMIT,"File size exceeds allowed limit."):(n.status=g.QUEUED,d.cfg.events.queued.call(d,n),p.push(n),l.push(n))}else d.cfg.events.queueError.call(d,n,f.INVALID_FILETYPE,"File is not an allowed file type.")}e?(d._._resetSelector(),d.cfg.events.dialogComplete.call(d,
h.length,p.length,l.length)):"function"===k.type(c)&&c.call(d,h.length,p.length,l.length);delete h;delete p;delete l};this._.dialogComplete=function(a,b){a=a||h.event;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0;d._.__queued()};this._._resetSelector=function(){d.elems.resetForm.appendChild(d.elems.selector);setTimeout(function(){d.elems.resetForm.reset();setTimeout(function(){d.elems.holder.appendChild(d.elems.selector)},25)},25)};this.elems.holder=l.createElement("div");this.elems.holder.style.cssText=
"";this.elems.resetForm=l.createElement("form");this.elems.selector=l.createElement("input");this.elems.selector.type="file";this.elems.selector.multiple=k.feature_upload.html5.multiple&&this.cfg.multiple;this.elems.holder.accept=this.cfg.fileTypes;var c=k.query?k.query(this.cfg.placeholder):l.querySelectorAll(this.cfg.placeholder);c.length&&(c=c[0],c.parentNode.insertBefore(this.elems.holder,c),this.elems.holder.appendChild(this.elems.selector),c.parentNode.removeChild(c),FOCUS.util.event.bind(this.elems.selector,
"click",this._.dialogStart),FOCUS.util.event.bind(this.elems.selector,"change",this._.dialogComplete),this.__setStyle("html5",this.elems.holder,this.elems.selector,this.cfg.button.text))},startUpload:function(){this.elems.poster=new XMLHttpRequest;k.event.bind(this.elems.poster.upload,"progress",this._.progress);k.event.bind(this.elems.poster.upload,"error",this._.error);k.event.bind(this.elems.poster.upload,"abort",this._.abort);k.event.bind(this.elems.poster,"readystatechange",this._.xhrComplete);
this._.start()},queue:function(a,b){a.files&&(a=a.files);a&&a.length&&this._.__queued(a,b)}})}.call(FOCUS,this,this.document);var SWFUpload,swfobject;void 0==SWFUpload&&(SWFUpload=function(h){this.initSWFUpload(h)});
void function(h){var l=window.encodeURIComponent,n=this.widget.Upload,e=this.util,k=h.prototype;k.initSWFUpload=function(a){try{this.customSettings={},this.settings={},this.eventQueue=[],this.movieName="SWFUpload_"+h.movieCount++,this.movieElement=null,h.instances[this.movieName]=this,this.initSettings(a),this.loadSupport(),this.swfuploadPreload()&&this.loadFlash(),this.displayDebugInfo()}catch(c){throw delete h.instances[this.movieName],c;}};h.instances={};h.movieCount=0;h.version="2.5.0 2010-01-15 Beta 2";
h.QUEUE_ERROR=n.QUEUE_ERROR;h.UPLOAD_ERROR=n.UPLOAD_ERROR;h.FILE_STATUS=n.FILE_STATUS;h.BUTTON_ACTION=n.BUTTON_ACTION;h.UPLOAD_TYPE={NORMAL:-1,RESIZED:-2};h.CURSOR={ARROW:-1,HAND:-2};h.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"};h.RESIZE_ENCODING={JPEG:-1,PNG:-2};h.completeURL=function(a){try{var c="",b=-1;if("string"!==typeof a||a.match(/^https?:\/\//i)||a.match(/^\//)||""===a)return a;b=window.location.pathname.lastIndexOf("/");c=0>=b?"/":window.location.pathname.substr(0,
b)+"/";return c+a}catch(e){return a}};h.onload=function(){};e.extend(!0,k,{initSettings:function(a){var c=this.settings;this.ensureDefault=function(b,f){var d=a[b];c[b]=void 0!=d?d:f};var b=function(a){for(var b in a)this.ensureDefault(b,a[b])};b.call(this,{upload_url:"",preserve_relative_urls:!1,file_post_name:"Filedata",post_params:{},use_query_string:!1,requeue_on_error:!1,http_success:[],assume_success_timeout:0,file_types:"*.*",file_types_description:"All Files",file_size_limit:0,file_upload_limit:0,
file_queue_limit:0,flash_url:"swfupload.swf",flash9_url:"swfupload_fp9.swf",prevent_swf_caching:!0,button_image_url:"",button_width:1,button_height:1,button_text:"",button_text_style:"color: #000000; font-size: 16pt;",button_text_top_padding:0,button_text_left_padding:0,button_action:h.BUTTON_ACTION.SELECT_FILES,button_disabled:!1,button_placeholder_id:"",button_placeholder:null,button_cursor:h.CURSOR.ARROW,button_window_mode:h.WINDOW_MODE.WINDOW});b.call(this,{debug:!1});c.debug_enabled=c.debug;
c.return_upload_start_handler=this.returnUploadStart;b.call(this,{swfupload_preload_handler:null,swfupload_load_failed_handler:null,swfupload_loaded_handler:null,file_dialog_start_handler:null,file_queued_handler:null,file_queue_error_handler:null,file_dialog_complete_handler:null,upload_resize_start_handler:null,upload_start_handler:null,upload_progress_handler:null,upload_error_handler:null,upload_success_handler:null,upload_complete_handler:null,mouse_click_handler:null,mouse_out_handler:null,
mouse_over_handler:null,debug_handler:this.debugMessage,custom_settings:{}});this.customSettings=c.custom_settings;c.prevent_swf_caching&&(c.flash_url=c.flash_url+(0>c.flash_url.indexOf("?")?"?":"&")+"preventswfcaching="+(new Date).getTime(),c.flash9_url=c.flash9_url+(0>c.flash9_url.indexOf("?")?"?":"&")+"preventswfcaching="+(new Date).getTime());c.preserve_relative_urls||(c.upload_url=h.completeURL(c.upload_url),c.button_image_url=h.completeURL(c.button_image_url));delete this.ensureDefault},loadSupport:function(){this.support=
{loading:swfobject.hasFlashPlayerVersion("9.0.28"),imageResize:swfobject.hasFlashPlayerVersion("10.0.0")}},loadFlash:function(){var a,c,b;if(this.support.loading)if(null!==document.getElementById(this.movieName))this.support.loading=!1,this.queueEvent("swfupload_load_failed_handler",["Element ID already in use"]);else if(a=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder,void 0==a)this.support.loading=!1,this.queueEvent("swfupload_load_failed_handler",
["button place holder not found"]);else{c="block"!==(a.currentStyle&&a.currentStyle.display||window.getComputedStyle&&document.defaultView.getComputedStyle(a,null).getPropertyValue("display"))?"span":"div";c=document.createElement(c);b=this.getFlashHTML();try{c.innerHTML=b}catch(e){this.support.loading=!1;this.queueEvent("swfupload_load_failed_handler",["Exception loading Flash HTML into placeholder"]);return}b=c.getElementsByTagName("object");!b||1<b.length||0===b.length?(this.support.loading=!1,
this.queueEvent("swfupload_load_failed_handler",["Unable to find movie after adding to DOM"])):(1===b.length&&(this.movieElement=b[0]),a.parentNode.replaceChild(c.firstChild,a),void 0==window[this.movieName]&&(window[this.movieName]=this.getMovieElement()))}else this.queueEvent("swfupload_load_failed_handler",["Flash Player doesn't support SWFUpload"])},getFlashHTML:function(a){a=this.settings;return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.support.imageResize?
a.flash_url:a.flash9_url,'" width="',a.button_width,'" height="',a.button_height,'" class="swfupload"><param name="wmode" value="',a.button_window_mode,'" /><param name="movie" value="',this.support.imageResize?a.flash_url:a.flash9_url,'" /><param name="quality" value="high" /><param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+this.getFlashVars()+'" />',"</object>"].join("")},getFlashVars:function(){var a,c;c=this.buildParamString();a=this.settings.http_success.join(",");
var b=this.settings;return["movieName=",l(this.movieName),"&amp;uploadURL=",l(b.upload_url),"&amp;useQueryString=",l(b.use_query_string),"&amp;requeueOnError=",l(b.requeue_on_error),"&amp;httpSuccess=",l(a),"&amp;assumeSuccessTimeout=",l(b.assume_success_timeout),"&amp;params=",l(c),"&amp;filePostName=",l(b.file_post_name),"&amp;fileTypes=",l(b.file_types),"&amp;fileTypesDescription=",l(b.file_types_description),"&amp;fileSizeLimit=",l(b.file_size_limit),"&amp;fileUploadLimit=",l(b.file_upload_limit),
"&amp;fileQueueLimit=",l(b.file_queue_limit),"&amp;debugEnabled=",l(b.debug_enabled),"&amp;buttonImageURL=",l(b.button_image_url),"&amp;buttonWidth=",l(b.button_width),"&amp;buttonHeight=",l(b.button_height),"&amp;buttonText=",l(b.button_text),"&amp;buttonTextTopPadding=",l(b.button_text_top_padding),"&amp;buttonTextLeftPadding=",l(b.button_text_left_padding),"&amp;buttonTextStyle=",l(b.button_text_style),"&amp;buttonAction=",l(b.button_action),"&amp;buttonDisabled=",l(b.button_disabled),"&amp;buttonCursor=",
l(b.button_cursor)].join("")},getMovieElement:function(){void 0==this.movieElement&&(this.movieElement=document.getElementById(this.movieName));if(null===this.movieElement)throw"Could not find Flash element";return this.movieElement},buildParamString:function(){var a,c,b=[];c=this.settings.post_params;if("object"===typeof c)for(a in c)c.hasOwnProperty(a)&&b.push(l(a.toString())+"="+l(c[a].toString()));return b.join("&amp;")},destroy:function(){var a;try{this.cancelUpload(null,!1);if(a=this.cleanUp())try{a.parentNode.removeChild(a)}catch(c){}window[this.movieName]=
null;h.instances[this.movieName]=null;delete h.instances[this.movieName];this.movieName=this.eventQueue=this.customSettings=this.settings=this.movieElement=null;return!0}catch(b){return!1}},displayDebugInfo:function(){var a=this.settings;this.debug(["---SWFUpload Instance Info---\nVersion: ",h.version,"\nMovie Name: ",this.movieName,"\nSettings:\n\tupload_url:               ",a.upload_url,"\n\tflash_url:                ",a.flash_url,"\n\tflash9_url:                ",a.flash9_url,"\n\tuse_query_string:         ",
a.use_query_string.toString(),"\n\trequeue_on_error:         ",a.requeue_on_error.toString(),"\n\thttp_success:             ",a.http_success.join(", "),"\n\tassume_success_timeout:   ",a.assume_success_timeout,"\n\tfile_post_name:           ",a.file_post_name,"\n\tpost_params:              ",a.post_params.toString(),"\n\tfile_types:               ",a.file_types,"\n\tfile_types_description:   ",a.file_types_description,"\n\tfile_size_limit:          ",a.file_size_limit,"\n\tfile_upload_limit:        ",
a.file_upload_limit,"\n\tfile_queue_limit:         ",a.file_queue_limit,"\n\tdebug:                    ",a.debug.toString(),"\n\tprevent_swf_caching:      ",a.prevent_swf_caching.toString(),"\n\tbutton_placeholder_id:    ",a.button_placeholder_id.toString(),"\n\tbutton_placeholder:       ",a.button_placeholder?"Set":"Not Set","\n\tbutton_image_url:         ",a.button_image_url.toString(),"\n\tbutton_width:             ",a.button_width.toString(),"\n\tbutton_height:            ",a.button_height.toString(),
"\n\tbutton_text:              ",a.button_text.toString(),"\n\tbutton_text_style:        ",a.button_text_style.toString(),"\n\tbutton_text_top_padding:  ",a.button_text_top_padding.toString(),"\n\tbutton_text_left_padding: ",a.button_text_left_padding.toString(),"\n\tbutton_action:            ",a.button_action.toString(),"\n\tbutton_cursor:            ",a.button_cursor.toString(),"\n\tbutton_disabled:          ",a.button_disabled.toString(),"\n\tcustom_settings:          ",a.custom_settings.toString(),
"\nEvent Handlers:\n\tswfupload_preload_handler assigned:  ",("function"===typeof a.swfupload_preload_handler).toString(),"\n\tswfupload_load_failed_handler assigned:  ",("function"===typeof a.swfupload_load_failed_handler).toString(),"\n\tswfupload_loaded_handler assigned:  ",("function"===typeof a.swfupload_loaded_handler).toString(),"\n\tmouse_click_handler assigned:       ",("function"===typeof a.mouse_click_handler).toString(),"\n\tmouse_over_handler assigned:        ",("function"===typeof a.mouse_over_handler).toString(),
"\n\tmouse_out_handler assigned:         ",("function"===typeof a.mouse_out_handler).toString(),"\n\tfile_dialog_start_handler assigned: ",("function"===typeof a.file_dialog_start_handler).toString(),"\n\tfile_queued_handler assigned:       ",("function"===typeof a.file_queued_handler).toString(),"\n\tfile_queue_error_handler assigned:  ",("function"===typeof a.file_queue_error_handler).toString(),"\n\tupload_resize_start_handler assigned:      ",("function"===typeof a.upload_resize_start_handler).toString(),
"\n\tupload_start_handler assigned:      ",("function"===typeof a.upload_start_handler).toString(),"\n\tupload_progress_handler assigned:   ",("function"===typeof a.upload_progress_handler).toString(),"\n\tupload_error_handler assigned:      ",("function"===typeof a.upload_error_handler).toString(),"\n\tupload_success_handler assigned:    ",("function"===typeof a.upload_success_handler).toString(),"\n\tupload_complete_handler assigned:   ",("function"===typeof a.upload_complete_handler).toString(),
"\n\tdebug_handler assigned:             ",("function"===typeof a.debug_handler).toString(),"\nSupport:\n\tLoad:                     ",this.support.loading?"Yes":"No","\n\tImage Resize:             ",this.support.imageResize?"Yes":"No","\n"].join(""))},addSetting:function(a,c,b){return void 0==c?this.settings[a]=b:this.settings[a]=c},getSetting:function(a){return void 0!=this.settings[a]?this.settings[a]:""},callFlash:function(a,c){var b,e,f;c=c||[];b=this.getMovieElement();try{void 0!=b?(f=b.CallFunction('<invoke name="'+
a+'" returntype="javascript">'+__flash__argumentsToXML(c,0)+"</invoke>"),e=eval(f)):this.debug("Can't call flash because the movie wasn't found.")}catch(d){this.debug("Exception calling flash function '"+a+"': "+d.message)}void 0!=e&&"object"===typeof e.post&&(e=this.unescapeFilePostParams(e));return e},selectFile:function(){this.callFlash("SelectFile")},selectFiles:function(){this.callFlash("SelectFiles")},startUpload:function(a){this.callFlash("StartUpload",[a])},startResizedUpload:function(a,c,
b,e,f,d){this.callFlash("StartUpload",[a,{width:c,height:b,encoding:e,quality:f,allowEnlarging:d}])},cancelUpload:function(a,c){!1!==c&&(c=!0);this.callFlash("CancelUpload",[a,c])},stopUpload:function(){this.callFlash("StopUpload")},requeueUpload:function(a){return this.callFlash("RequeueUpload",[a])},getStats:function(){return this.callFlash("GetStats")},setStats:function(a){this.callFlash("SetStats",[a])},getFile:function(a){return"number"===typeof a?this.callFlash("GetFileByIndex",[a]):this.callFlash("GetFile",
[a])},getQueueFile:function(a){return"number"===typeof a?this.callFlash("GetFileByQueueIndex",[a]):this.callFlash("GetFile",[a])},addFileParam:function(a,c,b){return this.callFlash("AddFileParam",[a,c,b])},removeFileParam:function(a,c){this.callFlash("RemoveFileParam",[a,c])},setUploadURL:function(a){this.settings.upload_url=a.toString();this.callFlash("SetUploadURL",[a])},setPostParams:function(a){this.settings.post_params=a;this.callFlash("SetPostParams",[a])},addPostParam:function(a,c){this.settings.post_params[a]=
c;this.callFlash("SetPostParams",[this.settings.post_params])},removePostParam:function(a){delete this.settings.post_params[a];this.callFlash("SetPostParams",[this.settings.post_params])},setFileTypes:function(a,c){this.settings.file_types=a;this.settings.file_types_description=c;this.callFlash("SetFileTypes",[a,c])},setFileSizeLimit:function(a){this.settings.file_size_limit=a;this.callFlash("SetFileSizeLimit",[a])},setFileUploadLimit:function(a){this.settings.file_upload_limit=a;this.callFlash("SetFileUploadLimit",
[a])},setFileQueueLimit:function(a){this.settings.file_queue_limit=a;this.callFlash("SetFileQueueLimit",[a])},setFilePostName:function(a){this.settings.file_post_name=a;this.callFlash("SetFilePostName",[a])},setUseQueryString:function(a){this.settings.use_query_string=a;this.callFlash("SetUseQueryString",[a])},setRequeueOnError:function(a){this.settings.requeue_on_error=a;this.callFlash("SetRequeueOnError",[a])},setHTTPSuccess:function(a){"string"===typeof a&&(a=a.replace(" ","").split(","));this.settings.http_success=
a;this.callFlash("SetHTTPSuccess",[a])},setAssumeSuccessTimeout:function(a){this.settings.assume_success_timeout=a;this.callFlash("SetAssumeSuccessTimeout",[a])},setDebugEnabled:function(a){this.settings.debug_enabled=a;this.callFlash("SetDebugEnabled",[a])},setButtonImageURL:function(a){void 0==a&&(a="");this.settings.button_image_url=a;this.callFlash("SetButtonImageURL",[a])},setButtonDimensions:function(a,c){this.settings.button_width=a;this.settings.button_height=c;var b=this.getMovieElement();
void 0!=b&&(b.style.width=a+"px",b.style.height=c+"px");this.callFlash("SetButtonDimensions",[a,c])},setButtonText:function(a){this.settings.button_text=a;this.callFlash("SetButtonText",[a])},setButtonTextPadding:function(a,c){this.settings.button_text_top_padding=c;this.settings.button_text_left_padding=a;this.callFlash("SetButtonTextPadding",[a,c])},setButtonTextStyle:function(a){this.settings.button_text_style=a;this.callFlash("SetButtonTextStyle",[a])},setButtonDisabled:function(a){this.settings.button_disabled=
a;this.callFlash("SetButtonDisabled",[a])},setButtonAction:function(a){this.settings.button_action=a;this.callFlash("SetButtonAction",[a])},setButtonCursor:function(a){this.settings.button_cursor=a;this.callFlash("SetButtonCursor",[a])},queueEvent:function(a,c){var b=this;void 0==c?c=[]:c instanceof Array||(c=[c]);if("function"===typeof this.settings[a])this.eventQueue.push(function(){this.settings[a].apply(this,c)}),setTimeout(function(){b.executeNextEvent()},0);else if(null!==this.settings[a])throw"Event handler "+
a+" is unknown or is not a function";},executeNextEvent:function(){var a=this.eventQueue?this.eventQueue.shift():null;"function"===typeof a&&a.apply(this)},unescapeFilePostParams:function(a){var c=/[$]([0-9a-f]{4})/i,b={},e,f,d;if(void 0!=a){for(f in a.post)if(a.post.hasOwnProperty(f)){for(e=f;null!==(d=c.exec(e));)e=e.replace(d[0],String.fromCharCode(parseInt("0x"+d[1],16)));b[e]=a.post[f]}a.post=b}return a},swfuploadPreload:function(){var a;if("function"===typeof this.settings.swfupload_preload_handler)a=
this.settings.swfupload_preload_handler.call(this);else if(void 0!=this.settings.swfupload_preload_handler)throw"upload_start_handler must be a function";void 0===a&&(a=!0);return!!a},flashReady:function(){this.cleanUp()?this.queueEvent("swfupload_loaded_handler"):this.debug("Flash called back ready but the flash movie can't be found.")},cleanUp:function(){var a,c=this.getMovieElement();try{if(c&&"unknown"===typeof c.CallFunction)for(a in this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)"),
c)try{"function"===typeof c[a]&&(c[a]=null)}catch(b){}}catch(e){}window.__flash__removeCallback=function(a,b){try{a&&(a[b]=null)}catch(c){}};return c},mouseClick:function(){this.queueEvent("mouse_click_handler")},mouseOver:function(){this.queueEvent("mouse_over_handler")},mouseOut:function(){this.queueEvent("mouse_out_handler")},fileDialogStart:function(){this.queueEvent("file_dialog_start_handler")},fileQueued:function(a){a=this.unescapeFilePostParams(a);this.queueEvent("file_queued_handler",a)},
fileQueueError:function(a,c,b){a=this.unescapeFilePostParams(a);this.queueEvent("file_queue_error_handler",[a,c,b])},fileDialogComplete:function(a,c,b){this.queueEvent("file_dialog_complete_handler",[a,c,b])},uploadResizeStart:function(a,c){a=this.unescapeFilePostParams(a);this.queueEvent("upload_resize_start_handler",[a,c.width,c.height,c.encoding,c.quality])},uploadStart:function(a){a=this.unescapeFilePostParams(a);this.queueEvent("return_upload_start_handler",a)},returnUploadStart:function(a){var c;
if("function"===typeof this.settings.upload_start_handler)a=this.unescapeFilePostParams(a),c=this.settings.upload_start_handler.call(this,a);else if(void 0!=this.settings.upload_start_handler)throw"upload_start_handler must be a function";void 0===c&&(c=!0);this.callFlash("ReturnUploadStart",[!!c])},uploadProgress:function(a,c,b){a=this.unescapeFilePostParams(a);this.queueEvent("upload_progress_handler",[a,c,b])},uploadError:function(a,c,b){a=this.unescapeFilePostParams(a);this.queueEvent("upload_error_handler",
[a,c,b])},uploadSuccess:function(a,c,b){a=this.unescapeFilePostParams(a);this.queueEvent("upload_success_handler",[a,c,b])},uploadComplete:function(a){a=this.unescapeFilePostParams(a);this.queueEvent("upload_complete_handler",a)},debug:function(a){this.queueEvent("debug_handler",a)},debugMessage:function(a){var c,b;if(this.settings.debug){c=[];if("object"===typeof a&&"string"===typeof a.name&&"string"===typeof a.message){for(b in a)a.hasOwnProperty(b)&&c.push(b+": "+a[b]);a=c.join("\n")||"";c=a.split("\n");
a="EXCEPTION: "+c.join("\nEXCEPTION: ")}h.Console.writeLine(a)}}});h.Console={};h.Console.writeLine=function(a){var c,b;try{c=document.getElementById("SWFUpload_Console"),c||(b=document.createElement("form"),document.getElementsByTagName("body")[0].appendChild(b),c=document.createElement("textarea"),c.id="SWFUpload_Console",c.style.fontFamily="monospace",c.setAttribute("wrap","off"),c.wrap="off",c.style.overflow="auto",c.style.width="700px",c.style.height="350px",c.style.margin="5px",b.appendChild(c)),
c.value+=a+"\n",c.scrollTop=c.scrollHeight-c.clientHeight}catch(e){alert("Exception: "+e.name+" Message: "+e.message)}}}.call(FOCUS,SWFUpload);
swfobject=function(){function h(){if(!F&&document.getElementsByTagName("body")[0]){try{var a,b=q.createElement("span");b.style.display="none";a=q.getElementsByTagName("body")[0].appendChild(b);a.parentNode.removeChild(a)}catch(d){return}F=!0;a=J.length;for(b=0;b<a;b++)J[b]()}}function l(a){F?a():J[J.length]=a}function n(){var a=q.getElementsByTagName("body")[0],b=q.createElement(w);b.setAttribute("style","visibility: hidden;");b.setAttribute("type",D);var d=a.appendChild(b);if(d){var c=0;(function V(){if(typeof d.GetVariable!==
t)try{var f=d.GetVariable("$version");f&&(f=f.split(" ")[1].split(","),r.pv=[m(f[0]),m(f[1]),m(f[2])])}catch(g){r.pv=[8,0,0]}else if(10>c){c++;setTimeout(V,10);return}a.removeChild(b);d=null;e()})()}else e()}function e(){var d=s.length;if(0<d)for(var e=0;e<d;e++){var g=s[e].id,h=s[e].callbackFn,l={success:!1,id:g};if(0<r.pv[0]){var m=p(g);if(m)if(x(s[e].swfVersion)&&!(r.wk&&312>r.wk))A(g,!0),h&&(l.success=!0,l.ref=k(g),l.id=g,h(l));else if(s[e].expressInstall&&a()){l={};l.data=s[e].expressInstall;
l.width=m.getAttribute("width")||"0";l.height=m.getAttribute("height")||"0";m.getAttribute("class")&&(l.styleclass=m.getAttribute("class"));m.getAttribute("align")&&(l.align=m.getAttribute("align"));for(var n={},m=m.getElementsByTagName("param"),w=m.length,u=0;u<w;u++)"movie"!==m[u].getAttribute("name").toLowerCase()&&(n[m[u].getAttribute("name")]=m[u].getAttribute("value"));c(l,n,g,h)}else g=m,r.ie&&4!=g.readyState?(g.style.display="none",n=q.createElement("div"),g.parentNode.insertBefore(n,g),n.parentNode.replaceChild(b(g),
n),f(g)):g.parentNode.replaceChild(b(g),g),h&&h(l)}else if(A(g,!0),h){if((g=k(g))&&typeof g.SetVariable!==t)l.success=!0,l.ref=g,l.id=g.id;h(l)}}}function k(a){var b=null;(a=p(a))&&"OBJECT"===a.nodeName.toUpperCase()&&(b=typeof a.SetVariable!==t?a:a.getElementsByTagName(w)[0]||a);return b}function a(){return!K&&x("6.0.65")&&(r.win||r.mac)&&!(r.wk&&312>r.wk)}function c(a,c,e,h){var k=p(e);e=d(e)?e.id:e;K=!0;N=h||null;R={success:!1,id:e};if(k){"OBJECT"===k.nodeName.toUpperCase()?(B=b(k),L=null):(B=
k,L=e);a.id=I;if(typeof a.width===t||!/%$/.test(a.width)&&310>m(a.width))a.width="310";if(typeof a.height===t||!/%$/.test(a.height)&&137>m(a.height))a.height="137";h=r.ie?"ActiveX":"PlugIn";h="MMredirectURL="+encodeURIComponent(z.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+h+"&MMdoctitle="+encodeURIComponent(q.title.slice(0,47)+" - Flash Player Installation");c.flashvars=typeof c.flashvars!==t?c.flashvars+("&"+h):h;r.ie&&4!=k.readyState&&(h=q.createElement("div"),e+="SWFObjectNew",h.setAttribute("id",
e),k.parentNode.insertBefore(h,k),k.style.display="none",f(k));g(a,c,e)}}function b(a){var b=q.createElement("div");if(r.win&&r.ie)b.innerHTML=a.innerHTML;else if(a=a.getElementsByTagName(w)[0])if(a=a.childNodes)for(var d=a.length,c=0;c<d;c++)!(1==a[c].nodeType&&"PARAM"===a[c].nodeName)&&8!=a[c].nodeType&&b.appendChild(a[c].cloneNode(!0));return b}function g(a,b,c){var e,f=p(c);c=d(c)?c.id:c;if(r.wk&&312>r.wk)return e;if(f){e=r.ie?q.createElement("div"):q.createElement(w);var g,h;typeof a.id===t&&
(a.id=c);for(h in b)if(b.hasOwnProperty(h)&&"movie"!==h.toLowerCase()){c=e;var k=h,l=b[h],m=q.createElement("param");m.setAttribute("name",k);m.setAttribute("value",l);c.appendChild(m)}r.ie&&(b=a.data,e=e.innerHTML,h=q.createElement("div"),h.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+b+"'>"+e+"</object>",e=h.firstChild);for(g in a)a.hasOwnProperty(g)&&(b=g.toLowerCase(),"styleclass"===b?e.setAttribute("class",a[g]):"classid"!==b&&"data"!==
b&&e.setAttribute(g,a[g]));r.ie?v[v.length]=a.id:(e.setAttribute("type",D),e.setAttribute("data",a.data));f.parentNode.replaceChild(e,f)}return e}function f(a){var b=p(a);b&&"OBJECT"===b.nodeName.toUpperCase()&&(r.ie?(b.style.display="none",function M(){if(4==b.readyState){for(var a in b)"function"===typeof b[a]&&(b[a]=null);b.parentNode.removeChild(b)}else setTimeout(M,10)}()):b.parentNode.removeChild(b))}function d(a){return a&&a.nodeType&&1===a.nodeType}function p(a){if(d(a))return a;var b=null;
try{b=q.getElementById(a)}catch(c){}return b}function m(a){return parseInt(a,10)}function u(a,b,c){a.attachEvent(b,c);G[G.length]=[a,b,c]}function x(a){var b=r.pv;a=(a+"").split(".");a[0]=m(a[0]);a[1]=m(a[1])||0;a[2]=m(a[2])||0;return b[0]>a[0]||b[0]==a[0]&&b[1]>a[1]||b[0]==a[0]&&b[1]==a[1]&&b[2]>=a[2]?!0:!1}function y(a,b,c,d){var e=q.getElementsByTagName("head")[0];if(e){c="string"===typeof c?c:"screen";d&&(O=E=null);if(!E||O!=c)d=q.createElement("style"),d.setAttribute("type","text/css"),d.setAttribute("media",
c),E=e.appendChild(d),r.ie&&(typeof q.styleSheets!==t&&0<q.styleSheets.length)&&(E=q.styleSheets[q.styleSheets.length-1]),O=c;E&&(typeof E.addRule!==t?E.addRule(a,b):typeof q.createTextNode!==t&&E.appendChild(q.createTextNode(a+" {"+b+"}")))}}function A(a,b){if(S){var c=b?"visible":"hidden",d=p(a);F&&d?d.style.visibility=c:"string"===typeof a&&y("#"+a,"visibility:"+c)}}function H(a){return null!==/[\\\"<>\.;]/.exec(a)&&typeof encodeURIComponent!==t?encodeURIComponent(a):a}var t="undefined",w="object",
D="application/x-shockwave-flash",I="SWFObjectExprInst",z=window,q=document,C=navigator,Q=!1,J=[],s=[],v=[],G=[],B,L,N,R,F=!1,K=!1,E,O,S=!0,P=!1,r=function(){var a=typeof q.getElementById!==t&&typeof q.getElementsByTagName!==t&&typeof q.createElement!==t,b=C.userAgent.toLowerCase(),c=C.platform.toLowerCase(),d=c?/win/.test(c):/win/.test(b),c=c?/mac/.test(c):/mac/.test(b),b=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,e="Microsoft Internet Explorer"===C.appName,f=[0,
0,0],g=null;if(typeof C.plugins!==t&&typeof C.plugins["Shockwave Flash"]===w){if((g=C.plugins["Shockwave Flash"].description)&&typeof C.mimeTypes!==t&&C.mimeTypes[D]&&C.mimeTypes[D].enabledPlugin)Q=!0,e=!1,g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),f[0]=m(g.replace(/^(.*)\..*$/,"$1")),f[1]=m(g.replace(/^.*\.(.*)\s.*$/,"$1")),f[2]=/[a-zA-Z]/.test(g)?m(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0}else try{var h=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(h&&(g=h.GetVariable("$version")))e=!0,g=g.split(" ")[1].split(","),
f=[m(g[0]),m(g[1]),m(g[2])]}catch(k){}return{w3:a,pv:f,wk:b,ie:e,win:d,mac:c}}();(function(){r.w3&&((typeof q.readyState!==t&&("complete"===q.readyState||"interactive"===q.readyState)||typeof q.readyState===t&&(q.getElementsByTagName("body")[0]||q.body))&&h(),F||(typeof q.addEventListener!==t&&q.addEventListener("DOMContentLoaded",h,!1),r.ie&&(q.addEventListener?q.addEventListener("onreadystatechange",function T(){"complete"===q.readyState&&(q.removeEventListener("onreadystatechange",T),h())},!1):
q.attachEvent("onreadystatechange",function U(){"complete"===q.readyState&&(q.detachEvent("onreadystatechange",U),h())}),z==top&&function M(){if(!F){try{q.documentElement.doScroll("left")}catch(a){setTimeout(M,0);return}h()}}()),r.wk&&function W(){F||(/loaded|complete/.test(q.readyState)?h():setTimeout(W,0))}()))})();J[0]=function(){Q?n():e()};(function(){r.ie&&window.attachEvent&&window.attachEvent("onunload",function(){for(var a=G.length,b=0;b<a;b++)G[b][0].detachEvent(G[b][1],G[b][2]);a=v.length;
for(b=0;b<a;b++)f(v[b]);for(var c in r)r[c]=null;r=null;for(var d in swfobject)swfobject[d]=null;swfobject=null})})();return{registerObject:function(a,b,c,d){if(r.w3&&a&&b){var e={};e.id=a;e.swfVersion=b;e.expressInstall=c;e.callbackFn=d;s[s.length]=e;A(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){if(r.w3)return k(a)},embedSWF:function(b,e,f,h,k,p,m,n,q,s){var u=d(e)?e.id:e,y={success:!1,id:u};r.w3&&!(r.wk&&312>r.wk)&&b&&e&&f&&h&&k?(A(u,!1),l(function(){f+="";h+="";var d={};if(q&&
typeof q===w)for(var l in q)d[l]=q[l];d.data=b;d.width=f;d.height=h;l={};if(n&&typeof n===w)for(var r in n)l[r]=n[r];if(m&&typeof m===w)for(var v in m)if(m.hasOwnProperty(v)){r=P?encodeURIComponent(v):v;var z=P?encodeURIComponent(m[v]):m[v];l.flashvars=typeof l.flashvars!==t?l.flashvars+("&"+r+"="+z):r+"="+z}if(x(k))v=g(d,l,e),d.id==u&&A(u,!0),y.success=!0,y.ref=v,y.id=v.id;else{if(p&&a()){d.data=p;c(d,l,e,s);return}A(u,!0)}s&&s(y)})):s&&s(y)},switchOffAutoHideShow:function(){S=!1},enableUriEncoding:function(a){P=
typeof a===t?!0:a},ua:r,getFlashPlayerVersion:function(){return{major:r.pv[0],minor:r.pv[1],release:r.pv[2]}},hasFlashPlayerVersion:x,createSWF:function(a,b,c){if(r.w3)return g(a,b,c)},showExpressInstall:function(b,d,e,f){r.w3&&a()&&c(b,d,e,f)},removeSWF:function(a){r.w3&&f(a)},createCSS:function(a,b,c,d){r.w3&&y(a,b,c,d)},addDomLoadEvent:l,addLoadEvent:function(a){if(typeof z.addEventListener!==t)z.addEventListener("load",a,!1);else if(typeof q.addEventListener!==t)q.addEventListener("load",a,!1);
else if(typeof z.attachEvent!==t)u(z,"onload",a);else if("function"===typeof z.onload){var b=z.onload;z.onload=function(){b();a()}}else z.onload=a},getQueryParamValue:function(a){var b=q.location.search||q.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);if(!a)return H(b);for(var b=b.split("&"),c=0;c<b.length;c++)if(b[c].substring(0,b[c].indexOf("="))==a)return H(b[c].substring(b[c].indexOf("=")+1))}return""},expressInstallCallback:function(){if(K){var a=p(I);a&&B&&(a.parentNode.replaceChild(B,
a),L&&(A(L,!0),r.ie&&(B.style.display="block")),N&&N(R));K=!1}},version:"2.3"}}();swfobject.addDomLoadEvent(function(){"function"===typeof SWFUpload.onload&&SWFUpload.onload.call(window)});
void function(h,l,n){var e=this,k=this.util;h=this.widget;var a=h.Upload,c=a.MODE,b=a.CURSOR,g={flash_url:"flashURL",flash9_url:"flash9URL",upload_url:"uploadURL",file_post_name:"filePostName",post_params:"postParams",file_types:"fileTypes",file_types_description:"fileTypesDescription",file_upload_limit:"uploadLimit",file_size_limit:"sizeLimit",file_queue_limit:"queueLimit",button_placeholder_id:"placeholder",swfupload_loaded_handler:"events.ready",swfupload_load_failed_handler:"events.fail",file_dialog_start_handler:"events.dialogStart",
file_queued_handler:"events.queued",file_queue_error_handler:"events.queueError",file_dialog_complete_handler:"events.dialogComplete",upload_start_handler:"events.uploadStart",upload_progress_handler:"events.uploadProgress",upload_error_handler:"events.uploadError",upload_success_handler:"events.uploadSuccess",upload_complete_handler:"events.uploadComplete",debug:"debug",button_width:"button.width",button_height:"button.height",button_text:"button.text"},f=function(a){a=(a||"").split(/\./);for(var b=
this,c=!1,e;e=a.shift();)if(e in b)c=!0,b=b[e];else{c=!1;break}return{has:c,value:c?b:null}};h.Upload_Flash=function(d){this.constructor=arguments.callee;this.mode=c.FLASH;this.cfg={};this.elems={};this._={flash_cfg:{flash_url:e.PATH_FLASH||e.BASEPATH+"widget/upload/flash/swfupload.swf",flash9_url:e.PATH_FLASH_FP9||e.BASEPATH+"wigdet/upload/flash/swfupload_fp9.swf",debug:!1,file_upload_limit:-1,button_width:650,button_height:200,button_cursor:b.POINTER,button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT},
status:a.TURNING.ON};this.set(d);this.init();this.instance=new SWFUpload(this._.flash_cfg)};h.Upload_Flash.prototype=new h.UploadBase;k.extend(!0,h.Upload_Flash.prototype,{init:function(){this.elems.holder=l.createElement("div");this.elems.flashWrap=l.createElement("div");this.elems.flashHolder=l.createElement("span");var a=this.elems.flashHolder.id="FOCUS_UPLOAD_FlashHolder_"+k.random(0,1E3),b=k.query?k.query(this._.flash_cfg.button_placeholder_id):l.getElementById(this._.flash_cfg.button_placeholder_id.replace(/^#/,
""));"length"in b&&(b=b[0]);b&&(b.parentNode.insertBefore(this.elems.holder,b),b.parentNode.removeChild(b),this.elems.holder.appendChild(this.elems.flashWrap),this.elems.flashWrap.appendChild(this.elems.flashHolder));this.__setStyle("flash",this.elems.holder,this.elems.flashWrap,this._.flash_cfg.button_text);this._.flash_cfg.button_placeholder_id=a;this._.flash_cfg.button_text=""},set:function(a){k.extend(!0,this.cfg,a);this.__setFlashCfg(this.cfg)},__setFlashCfg:function(a){var b,c;for(c in g)b=
f.call(a,g[c]),b.has&&(this._.flash_cfg[c]=b.value);this._.flash_cfg.button_action=SWFUpload.BUTTON_ACTION[a.multiple?"SELECT_FILES":"SELECT_FILE"];this.isReady&&(this.multiple(this.cfg.multiple),this.setFileTypes(this.cfg.fileTypes),this.setFileSizeLimit(this.cfg.sizeLimit),this.setUploadURL(this.cfg.uploadURL),this.setFilePostName(this.cfg.filePostName),this.setFileQueueLimit(this.cfg.queueLimit))},__setStyle:function(a,b,c,e){var f=this.cfg.css;b.className=f.WRAP;c.className=f.FLASH;a=b.getElementsByTagName("label");
a.length&&b.removeChild(a[0]);a=l.createElement("label");a.className=f.TEXT;a.innerHTML=e;b.insertBefore(a,c);k.event.bind(b,"mouseover",function(a){a.cancelBubble=!0;a.returnValue=!1;k.addClass(b,f.HOVER)});k.event.bind(b,"mouseout",function(a){a.cancelBubble=!0;a.returnValue=!1;k.removeClass(b,f.HOVER)});this.elems.text=a},startUpload:function(){this.ready(function(){this.instance.startUpload()})},cancelUpload:function(a){this.ready(function(){if("function"===k.type(a))this.one("uploadError",a);
this.instance.cancelUpload(0,!0)})},stopUpload:function(a){if("function"===k.type(a))this.one("uploadError",a);this.instance.stopUpload()},getQueueFile:function(b){return new a.File4Flash(this.instance.getQueueFile(b))},setPostParam:function(a){this.ready(function(){this.instance.setPostParams(a)})},addPostParam:function(a,b){this.ready(function(){this.instance.addPostParam(a,b)})},removePostParam:function(a){this.ready(function(){this.instance.removePostParam(a)})},setUploadURL:function(a){this.ready(function(){this.cfg.uploadURL=
a;this.instance.setUploadURL(a)})},setFilePostName:function(a){this.ready(function(){this.instance.setFilePostName(a)})},setFileTypes:function(a,b){this.ready(function(){this.cfg.fileTypes=k.convert2MimeTypes(a);this.instance.setFileTypes(k.convertMimeTypes(a),b||this.cfg.fileTypesDescription)})},setFileSizeLimit:function(a){this.ready(function(){this.cfg.sizeLimit=limt;this.instance.setFileSizeLimit(a)})},setFileQueueLimit:function(a){this.ready(function(){this.cfg.queueLimit=a;this.instance.setFileQueueLimit(a)})},
__translateStatus:function(b){var c=k.type(b);"string"===c?(b=k.trim(b),b=b.length?!!a.TURNING[b.toUpperCase()]:a.TURNING.OFF):b="undefined"===c?!_this._.status:!!b;return b},turn:function(a){var c=this.cfg.css;a=this.__translateStatus(a);this._.status=a;k[a?"removeClass":"addClass"](this.elems.holder,c.DISABLED);this.ready(function(){this.instance.setButtonDisabled(!a);this.instance.setButtonCursor(b[a?"POINTER":"DEFAULT"])})},multiple:function(a){this.ready(function(){this.instance.setButtonAction(SWFUpload.BUTTON_ACTION[a?
"SELECT_FILES":"SELECT_FILE"])})}})}.call(FOCUS,this,document);FOCUS.widget.Upload.__defaults__();
